#coding=utf-8
'''
Created on 2016年11月12日

@author: pc
'''
from Tkinter import *
import tkMessageBox
from updateLog import *

class log_gui:
    #初始化TKINTER对像形状
    def __init__(self):
        self.root=Tk()
    
        self.root.title("预设参数")
    
        self.filelist=[]
        width_n=self.root.winfo_screenwidth()/2-180
        height_n=self.root.winfo_screenheight()/2-250
        self.pack=0
        self.root.geometry('330x550+%s+%s' % (width_n,height_n))       
    #初始化控件
    def add_info(self):
        def change_on():
            if b2.text=="去修改（当前为新增模式）":
                b2_text_var.set("去新增（当前为修改模式）")
                b1_text_var.set("保      存")
            else:
                b2_text_var.set("去修改（当前为新增模式）")
                b1_text_var.set("写      入")
        def click_on():
            self.filelist.append(up_ver_var.get())
            self.filelist.append(head_var.get())
            self.filelist.append(self.e2.get("0.0",END))
            self.filelist.append(SVN_V_var.get())
            self.filelist.append(emp_name_var.get())
            for filename in self.filelist:
                if filename=="":
                    tkMessageBox.showinfo("提示：","以上所有项不可为空！")
                    break
            else:
                write_log(self.filelist)
                    
        #功能描述
        lab1=Label(self.root,text="请在下方输入功能或BUG描述").grid(row=2,column=0,columnspan=3)
    
        head_var=StringVar()
    
        e1=Entry(self.root,textvariable=head_var,width=35).grid(row=3,column=1,columnspan=2)
    
        head_var.set("")
        
        #文件列表
        lab2=Label(self.root,text="请在下方输入需要更新的文件（一个文件一行）。").grid(row=4,column=0,columnspan=3)
    
        
    
        self.e2=Text(self.root,width=35,height=10,font = ("Arial, 10"))
        self.e2.grid(row=5,column=1,columnspan=2)
    

        
        #SVN版本号
        lab3=Label(self.root,text="请在下方输入SVN版本号").grid(row=6,column=0,columnspan=3)
    
        SVN_V_var=StringVar()
    
        e3=Entry(self.root,textvariable=SVN_V_var,width=35).grid(row=7,column=1,columnspan=2)
    
        SVN_V_var.set("")
        
        #设置开发人
        lab4=Label(self.root,text="请在下方输入开发人员姓名").grid(row=8,column=0,columnspan=3)
    
        emp_name_var=StringVar()
    
        e4=Entry(self.root,textvariable=emp_name_var,width=35).grid(row=9,column=1,columnspan=2)
    
        emp_name_var.set("")
        
        up_ver_var=StringVar()
        e5=Entry(self.root,textvariable=up_ver_var,width=35).grid(row=2,column=1,columnspan=2)
        up_ver_var.set("")
        Label(self.root,text="更新码").grid(row=2,column=0)
        Label(self.root,text="功能描述").grid(row=3,column=0)
        Label(self.root,text="文件列表").grid(row=5,column=0)
        Label(self.root,text="SVN版本号").grid(row=7,column=0)
        remote=Label(self.root,text="开发者").grid(row=9,column=0)
        b1_text_var=StringVar()
        b1=Button(self.root,textvariable=b1_text_var,command=click_on,bg="red",width=10,fg="white")
        b1_text_var.set("写      入")
        b1.grid(row=11,column=1)
        b2_text_var=StringVar()
        b2=Button(self.root,textvariable=b2_text_var,command=change_on,bg="red",width=44,fg="white")
        b2_text_var.set("去修改（当前为新增模式）")
        b2.grid(row=1,column=0,columnspan=5)
        self.root.mainloop()
        
        
if __name__=="__main__":
    gui_log=log_gui()
    gui_log.add_info()